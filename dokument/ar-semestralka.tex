\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[czech]{babel}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{mathtools}
\usepackage{fancyhdr}
\usepackage{epstopdf}
\usepackage{float}
\usepackage{gensymb}
\usepackage[final]{pdfpages}
\usepackage{a4wide}
\renewcommand{\arraystretch}{1.5}
%\renewcommand{\baselinestretch}{1.25}

\title{Automatické řízení \\
	Semestrální práce}
\usepackage[top=25mm, left=35mm, right=25mm, bottom=25mm]{geometry}
\author{Miroslav Bulka, Jan Cibulka}
\date{81.121.1025}	
\setlength{\parskip}{10pt}
\begin{document}
\maketitle

\begin{figure}[h]
	\centering
	\includegraphics[width=9cm]{obrazky/fav.png}
\end{figure}
\clearpage
\newpage


\includepdf{obrazky/Zadani1.pdf}
\newpage
\includepdf{obrazky/Zadani2.pdf}
\newpage

\tableofcontents
\newpage
\section{Řešení - Model neurčitosti}
\subsection{První úkol - výpočet nastavení ventilů}
Máme konstantní přítok $Q_{1}=Q_{10}=1.5\cdot 10^{-4}m^{3}s^{-1}$, přičemž víme, že:
\begin{equation}
\left [\begin{array}{cc}
\frac{dV_{1}}{dt}\\
\frac{dV_{2}}{dt}
\end{array}\right ] = 
\left [\begin{array}{cc}
Q_{1}-Q_{p}\\
Q_{p}-Q_{2}\end{array}\right ] = 
\left [\begin{array}{cc}
Q_{1}-c_{p}S_{p}v_{p}\\
c_{p}S_{p}v_{p}-c_{2}S_{2}v_{2}\end{array}\right ].
\end{equation}
Z Bernoulliho zákona pak odvodíme:
\begin{equation}
\left [\begin{array}{cc}
v_{p} \\
v_{2}
\end{array}\right ] = 
\left [\begin{array}{cc}
\sqrt{2g\cdot (H_{1}-H_{2})}\\
\sqrt{2g\cdot (H_{2})}\end{array}\right ].
\end{equation}
Daný systém popisují diferenciální rovnice:
\begin{equation}
\left [\begin{array}{cc}
\frac{dH_{1}}{dt} \\
\frac{dH_{2}}{dt}
\end{array}\right ] = 
\left [\begin{array}{cc}
\frac{1}{S}\cdot Q_{1}-\frac{S_{p}C_{p}}{S}\cdot \sqrt{2g\cdot (H_{1}-H_{2})}\\
\frac{S_{p}C_{p}}{S}\cdot \sqrt{2g\cdot \left ( H_{1}-H_{2} \right )}-\frac{S_{2}C_{2}}{S}\cdot \sqrt{2g\cdot H_{2}}\end{array}\right ].
\end{equation}
Zavedením 
$ x_{1}(t)=H_{1}(t);\;$ 
$x_{2}(t)=H_{2}(t);\;$ 
$u(t)=Q_{1}(t)\; $
získáme
\begin{equation}\label{eq:Stavove_x} 
\left [\begin{array}{cc}
\frac{dx_{1}}{dt} \\
\frac{dx_{2}}{dt}
\end{array}\right ] = 
\left [\begin{array}{cc}
\frac{1}{S}\cdot u-\frac{S_{p}C_{p}}{S}\cdot \sqrt{2g\cdot (x_{1}- x_{2})}\\
\frac{S_{p}C_{p}}{S}\cdot \sqrt{2g\cdot \left ( x_{1}-x_{2} \right )}-\frac{S_{2}C_{2}}{S}\cdot \sqrt{2g\cdot x_{2}}\end{array}\right ].
\end{equation}
Za předpokladu neměnících se hladin $H_{1}$ a $ H_{2} $ budou obě derivace nulové. Položíme je tedy nulou a díky tomu získáme požadované nastavení přepouštěcího ventilu $S_{p}$ a výtokového ventilu $S_{2}$:
\begin{equation}\label{eq:vypocet_ventilu}
\left [\begin{array}{cc}
S_{p} \\
S_{2}
\end{array}\right ] = 
\left [\begin{array}{cc}
\frac{Q_{10}}{C_{p}\cdot \sqrt{2g\left ( H_{1}-H_{2} \right )}}\\
\frac{C_{p} S_{p}\sqrt{\left ( H_{1}-H_{2} \right )}}{C_{2} \sqrt{H_{2}}}\end{array}\right ],
\end{equation}
kde po dosazení získáme:
\begin{equation}\label{eq:nastaveni_ventilu_10}
\left [\begin{array}{cc}
S_{p} \\
S_{2}
\end{array}\right ] = 
\left [\begin{array}{cc}
7.2864\cdot 10^{-5}\\
1.2620\cdot 10^{-4}\end{array}\right ].
\end{equation}

\newpage 
\subsection{Druhý úkol - linearizace ve dvou pracovních bodech}
\subsubsection{Konstantní průtoky - mění se hladina}
\label{sec:2A}
Nejdříve si zavedeme značení:
\begin{equation}
\left [\begin{array}{cc}
y_{1}\left ( t \right ) \\
y_{2}\left ( t \right )
\end{array}\right ] = 
\left [\begin{array}{cc}
x_{1}\left ( t \right )\\
x_{2}\left ( t \right )\end{array}\right ]=
\left [\begin{array}{cc}
H_{1}\left ( t \right )\\
H_{2}\left ( t \right )\end{array}\right ].
\end{equation}
Chování těchto stavových proměnných je popsáno rovnicí \ref{eq:Stavove_x}. My chceme získat linearizovaný stavový model, a to ve tvaru:
\begin{equation}
\dot{x}\left ( t \right )=Ax\left( t \right )+Bu \left( t \right)\end{equation}
\begin{equation}
y\left ( t \right )=Cx\left( t \right ).
\end{equation}
Pro systém popsaný rovnicí \ref{eq:Stavove_x} budou parametry  linearizovaného stavového modelu, provedeme-li klasickou linearizaci, mít následující podobu:
\begin{equation}\label{eq:linearizace_zakladni_vztah}A = 
\left [\begin{array}{cc}
-\frac{C_{p}S_{p}\sqrt{2g}}{2\cdot S\sqrt{\left ( H_{1}-H_{2} \right )}} & \frac{C_{p}S_{p}\sqrt{2g}}{2\cdot S\sqrt{\left ( H_{1}-H_{2} \right )}} \\
\frac{C_{p}S_{p}\sqrt{2g}}{2\cdot S\sqrt{\left ( H_{1}-H_{2} \right )}} & -\frac{C_{p}S_{p}\sqrt{2g}}{2\cdot S\sqrt{\left ( H_{1}-H_{2} \right )}}-\frac{C_{2}S_{2}g}{S\sqrt{\left ( 2\cdot g\cdot H_{2} \right )}}
\end{array}\right ].
\end{equation}
\begin{equation}B = 
\left [\begin{array}{cc}
\frac{1}{S}\\
0
\end{array}\right ].
\end{equation}
Parametry modelu pro konstantní přítok $Q_{1}=Q_{10}=1.5\cdot 10^{-4}m^{3}s^{-1}$:
$$A =
\left [\begin{array}{cc}
-0.05  & 0.05 \\
0.05 & -0.2
\end{array}\right ];\;
B= 
\left [\begin{array}{cc}
400\\
0\end{array}\right ];\;
C=
\left [\begin{array}{cc}
1 & 0\\
0 & 1\end{array}\right ].
$$
Parametry modelu pro zvýšený přítok $Q_{20}=Q_{10}\cdot1.2=1.8\cdot 10^{-4}m^{3}s^{-1}$:
$$A =
\left [\begin{array}{cc}
-0.0417  & 0.0417 \\
0.0417 & -0.1667
\end{array}\right ];\;
B= 
\left [\begin{array}{cc}
400\\
0\end{array}\right ];\;
C=
\left [\begin{array}{cc}
1 & 0\\
0 & 1\end{array}\right ].
$$
\subsubsection{Konstantní hladina - mění se průtoky}
V tomto případě budeme usilovat o to, aby se hladiny neměnily.
Bude tedy platit: 
\begin{equation}
\left [\begin{array}{cc}
H_{1}\left ( t \right ) \\
H_{2}\left ( t \right )
\end{array}\right ] = 
\left [\begin{array}{cc}
H_{10}\\
H_{20}\end{array}\right ].
\end{equation}
Naopak budeme měnit nastavení ventilů. Takovéto nastavení jsme pro konstantní přítok $ Q_{10} $ již spočetli, viz výsledek \ref{eq:nastaveni_ventilu_10}. Aby byla výška hladin konstantní i při přítoku $ 1.2 \cdot Q_{10} $, budeme muset nastavení ventilů přepočítat pomocí vztahu \ref{eq:vypocet_ventilu}, čímž získáme následující výsledné nastavení:
\begin{equation}\label{eq:nastaveni_ventilu_20}
\left [\begin{array}{cc}
S_{p} \\
S_{2}
\end{array}\right ] = 
\left [\begin{array}{cc}
8.7437\cdot 10^{-5}\\
1.5145\cdot 10^{-4}\end{array}\right ].
\end{equation}
K získání linearizovaného stavového modelu v tomto pracovním bodě využijeme zavedeného vztahu \ref{eq:linearizace_zakladni_vztah}. Jeho parametry budou vypadat následovně:
$$A =
\left [\begin{array}{cc}
-0.06  & 0.06 \\
0.06 & -0.24
\end{array}\right ];\;
B= 
\left [\begin{array}{cc}
400\\
0\end{array}\right ];\;
C=
\left [\begin{array}{cc}
1 & 0\\
0 & 1\end{array}\right ].
$$

\label{sec:2B}
\subsection{Třetí úkol}
P
Přenos systému, nyquist asi, oba pracovní body, neurčitost.
\subsubsection{Určení numerické neurčitosti}
\subsubsection{Definovaní modelu s pertrubacemi, nominální model, váhová funkce}
\subsection{Čtvrtý úkol}
Porovnání neurčitostí z \ref{sec:2A} a \ref{sec:2B}.
\section{Řešení - Návrh regulátoru}
\subsection{První úkol}
Parametry PI regulatoru. Nejsem si jistej jestli tady jde o subukoly nebo jenom podminky pro jeden ukol.
\subsubsection{Vnitřní stabilita uzavřené smyčky (Nquistovo kritérium)}
\subsubsection{Robustnost ve stabilitě}
\subsubsection{Podmínka útlumu komplementrání citlivostní funkce}
\subsubsection{Energie šumu omezená.}
\subsection{Druhý úkol}
Harmonické poruchy.
\subsection{Třetí úkol}
Maximální kolísání hladiny.
\subsection{Čtvrtý úkol}
Určení hodnoty nějakých signálů.


\end{document}      
